# Tsurust WASM Deployment

This directory contains the WebAssembly build of the Tsurust client.

## Files

- `index.html` - Main HTML page
- `client_egui.js` - JavaScript glue code generated by wasm-bindgen
- `client_egui_bg.wasm` - Compiled WebAssembly binary

## Running Locally

You need to serve these files from a web server (not `file://` protocol).

### Option 1: Python HTTP Server

```bash
cd client-egui
python3 -m http.server 8000
```

Then open http://localhost:8000/web/

### Option 2: Node.js http-server

```bash
cd client-egui
npx http-server -p 8000
```

Then open http://localhost:8000/web/

### Option 3: Rust simple-http-server

```bash
cargo install simple-http-server
cd client-egui
simple-http-server -p 8000
```

Then open http://localhost:8000/web/

## Building

To rebuild the WASM files:

**On Unix/Linux/macOS:**
```bash
cd client-egui
./build_wasm.sh
```

**On Windows:**
```powershell
cd client-egui
.\build_wasm.ps1
```

## Deployment

To deploy to a web server:

1. Build the WASM files (see above)
2. Copy the `web/` directory contents to your web server
3. Ensure your web server is configured to serve `.wasm` files with the correct MIME type: `application/wasm`

### Nginx Configuration Example

```nginx
location /tsurust/ {
    types {
        application/wasm wasm;
    }
}
```

### Apache Configuration Example

```apache
AddType application/wasm .wasm
```

## Notes

- The WASM binary is ~3.6MB (release build with optimizations)
- Further optimization is possible with `wasm-opt` from binaryen
- Online multiplayer requires a WebSocket server (see `server/` directory)
